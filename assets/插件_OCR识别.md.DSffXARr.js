import{_ as s,c as i,o as a,U as t}from"./chunks/framework.DLC3mPHA.js";const E=JSON.parse('{"title":"pdocr-rpc","description":"","frontmatter":{},"headers":[],"relativePath":"插件/OCR识别.md","filePath":"插件/OCR识别.md","lastUpdated":1720776232000}'),e={name:"插件/OCR识别.md"},p=t(`<h1 id="pdocr-rpc" tabindex="-1">pdocr-rpc <a class="header-anchor" href="#pdocr-rpc" aria-label="Permalink to &quot;pdocr-rpc&quot;">​</a></h1><p><strong>Source Code</strong>: <a href="https://github.com/linuxdeepin/pdocr-rpc" target="_blank"><a href="https://github.com/linuxdeepin/pdocr-rpc" target="_blank" rel="noreferrer">https://github.com/linuxdeepin/pdocr-rpc</a></a></p><p>基于 <code>PaddleOCR</code> 封装的 <code>RPC</code> 服务，包含客户端和服务端。</p><p>客户端提供了一个简单易用的函数 <code>ocr</code>，通过不同的参数控制返回不同的值。</p><h2 id="_1、服务端" tabindex="-1">1、服务端 <a class="header-anchor" href="#_1、服务端" aria-label="Permalink to &quot;1、服务端&quot;">​</a></h2><h3 id="服务端安装" tabindex="-1">服务端安装 <a class="header-anchor" href="#服务端安装" aria-label="Permalink to &quot;服务端安装&quot;">​</a></h3><div class="language-console vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pip install pdocr-rpc[server]</span></span></code></pre></div><h3 id="服务端启动服务" tabindex="-1">服务端启动服务 <a class="header-anchor" href="#服务端启动服务" aria-label="Permalink to &quot;服务端启动服务&quot;">​</a></h3><p>随意新建一个<code>py</code>文件，名称你可以自定义，比如：<code>ocr_server.py</code>；</p><p>写入以下内容：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ocr_server.py</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pdocr_rpc.server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> server</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server()</span></span></code></pre></div><p>默认端口号为 <code>8890</code> 如果你想修改端口：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pdocr_rpc.server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> server</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pdocr_rpc.conf </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> setting</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">setting.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8888</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server()</span></span></code></pre></div><h2 id="_2、客户端" tabindex="-1">2、客户端 <a class="header-anchor" href="#_2、客户端" aria-label="Permalink to &quot;2、客户端&quot;">​</a></h2><h3 id="客户端安装" tabindex="-1">客户端安装 <a class="header-anchor" href="#客户端安装" aria-label="Permalink to &quot;客户端安装&quot;">​</a></h3><div class="language-console vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">console</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pip install pdocr-rpc</span></span></code></pre></div><h3 id="客户端使用" tabindex="-1">客户端使用 <a class="header-anchor" href="#客户端使用" aria-label="Permalink to &quot;客户端使用&quot;">​</a></h3><h4 id="_2-1、识别当前屏幕的所有文字内容" tabindex="-1">2.1、识别当前屏幕的所有文字内容 <a class="header-anchor" href="#_2-1、识别当前屏幕的所有文字内容" aria-label="Permalink to &quot;2.1、识别当前屏幕的所有文字内容&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pdocr_rpc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> OCR</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pdocr_rpc.conf </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> setting</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 注意IP和端口要和你的服务端IP对应</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">setting.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SERVER_IP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;192.168.0.1&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">setting.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8888</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OCR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ocr()</span></span></code></pre></div><p>自动识别当前整个屏幕的所有内容。</p><h4 id="_2-2、指定某张图片识别的所有文字内容" tabindex="-1">2.2、指定某张图片识别的所有文字内容 <a class="header-anchor" href="#_2-2、指定某张图片识别的所有文字内容" aria-label="Permalink to &quot;2.2、指定某张图片识别的所有文字内容&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OCR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ocr(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">picture_abspath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;~/Desktop/test.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>返回识别图片 <code>test.png</code> 的内容。</p><h4 id="_2-3、在全屏指定查找某个字符串的坐标" tabindex="-1">2.3、在全屏指定查找某个字符串的坐标 <a class="header-anchor" href="#_2-3、在全屏指定查找某个字符串的坐标" aria-label="Permalink to &quot;2.3、在全屏指定查找某个字符串的坐标&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OCR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ocr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;天天向上&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>返回当前屏幕中，“天天向上”的坐标，如果存在多个，则返回一个字典。</p><h4 id="_2-4、指定某张图片查找某个字符串的坐标" tabindex="-1">2.4、指定某张图片查找某个字符串的坐标 <a class="header-anchor" href="#_2-4、指定某张图片查找某个字符串的坐标" aria-label="Permalink to &quot;2.4、指定某张图片查找某个字符串的坐标&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OCR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ocr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;天天向上&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">，</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">picture_abspath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;~/Desktop/test.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h4 id="_2-5、其他参数" tabindex="-1">2.5、其他参数 <a class="header-anchor" href="#_2-5、其他参数" aria-label="Permalink to &quot;2.5、其他参数&quot;">​</a></h4><ul><li><p>识别语言</p><p>lang： <code>ch</code>, <code>en</code>, <code>fr</code>, <code>german</code>, <code>korean</code>, <code>japan</code></p><p>默认为ch，中文，如果要修改识别语言；</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OCR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ocr(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">lang</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div></li><li><p>匹配度</p><p>similarity: float</p><p>默认为0.6，可以修改为从0到1的数；</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">OCR.ocr(similarity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=0.1)</span></span></code></pre></div></li><li><p>返回原始数据</p><p>return_default: bool</p><p>默认为False，即默认返回识别到字符串的中心坐标，True表示返回原始数据；</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OCR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ocr(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">return_default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div></li><li><p>只返回第一个</p><p>return_first: bool</p><p>当传入要查找的字符串时，可能存在当前屏幕中有多个目标；</p><p>默认情况下是会将识别到的多个目标组装成字典返回；</p><p>return_first=True 表示返回识别到的第一个。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OCR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ocr(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">return_first</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> )</span></span></code></pre></div></li></ul>`,30),n=[p];function h(l,r,k,o,d,c){return a(),i("div",null,n)}const y=s(e,[["render",h]]);export{E as __pageData,y as default};
